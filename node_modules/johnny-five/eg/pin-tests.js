var five = require("../lib/johnny-five.js"),
    temporal = require("temporal"),
    devices, events;

(new five.Board()).on("ready", function() {
  var cycle = 0;

  devices = {
    digital: {
      strobe: new five.Pin(13)
    },

    analog: {

    }
  };

  events = {
    digital: {
      strobe: []
    },
    analog: {
      // strobe: []
    }
  };

  this.repl.inject(devices);

  temporal.loop(500, function() {
    devices.digital.strobe[ cycle % 2 === 0 ? "high" : "low" ]();
    cycle++;
  });


  // Event tests

  [ "high", "low" ].forEach(function( state ) {

    devices.digital.strobe.on( state, function() {

      if ( events.digital.strobe.indexOf(state) === -1 ) {
        console.log( "Event emitted for:", state, "on", this.addr );
        events.digital.strobe.push(state);
      }

    });
  });
});
