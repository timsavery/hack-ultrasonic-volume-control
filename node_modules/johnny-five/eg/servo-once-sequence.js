var five = require("../lib/johnny-five.js");

function waitTime( prev, next ) {
  return Math.round( Math.abs( next - prev ) / 60 * waitTime.speed ) * 2;
}

// waitTime.speed = 160;
waitTime.speed = 230;




(new five.Board()).on("ready", function() {
  var servo, last;

  servo = new five.Servo(9);
  last = 90;

  this.repl.inject({
    s: servo
  });

  // function delay( ms ) {
  //   var start = Date.now();
  //   while ( Date.now() < start + ms ) {}
  // }

  // servo.move(135);
  // delay(346);

  // servo.move(0);
  // delay(1036);

  // servo.move(45);
  // delay(690);

  // servo.move(180);
  // delay(1036);

  // servo.move(90);
  // delay(690);


  five.Sequence(
    [ 135,
      0,
      90,
      45,
      180,
      90
    ].map(function( degree ) {
      var wait = waitTime( last, degree );
      last = degree;

      return {
        wait: wait,
        task: function() {
          servo.move( degree );
        }
      };
    })
  );
});



// servo.move(90);

// delay(240);

// servo.move(180);

// delay(240);

// servo.move(0);

// delay(480);

// servo.move(90);

// delay(240);
